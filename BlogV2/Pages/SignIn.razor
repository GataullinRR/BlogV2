@page "/signin"
@inject IAuthService Auth;
@inject NavigationManager Navigator;

<FormTemplate OnSubmit="SignInAsync">
    <FormTextInput Name="User name" @bind-Value="@_model.UserName" />
    <FormTextInput Name="Password" type="password" @bind-Value="@_model.Password" />

    <FormValidator/>

    <FormButton Name="Sign In" IsSubmit="true" />
</FormTemplate>

@code {
    public class SignInModel
    {
        [Required]
        public string UserName { get; set; }

        [Required]
        public string Password { get; set; }
    }

    public static string GetPath()
    {
        return "/signin";
    }

    readonly SignInModel _model = new SignInModel();

    public async Task SignInAsync()
    {
        await Auth.SignInAsync(new SignInRequest(_model.UserName, _model.Password));

        Navigator.NavigateTo("/");
    }
}
